BoxLayout:
    BoxLayout:
        id: one
        orientation: 'horizontal'
        BoxLayout:
            width: 134
            size_hint_x: None
            orientation: 'vertical'
            padding: 2
            spacing: 5

            GridLayout:
                rows: 1
                row_default_height: 32
                size_hint_y: None
                height: 32

                Button:
                    id: new_storage
                    text: 'Folder'
                    size_hint_y: None
                    height: '32dp'
                    on_release:

                Button:
                    id: new_note
                    text: 'Folder'
                    size_hint_y: None
                    height: '32dp'
                    on_release:

            TabbedPanel:
                id: tp
                size_hint_y: 1
                do_default_tab: False
                tab_height: 32
                tab_width: 32
                strip_border: [1,1,1,1]
             #   strip_image: True

                TabbedPanelItem:
                    id: folders
                    text: 'FL'
                #    on_release: app.showcase_floatlayout(fl)
                    TreeView:
                        id: folders
                        size_hint: (1, 1)
                        text: ''

                TabbedPanelItem:
                    id: bookmarks
                    text: 'BM'
                #    on_release: app.showcase_boxlayout(box)

                TabbedPanelItem:
                    id: tags
                    text: 'TG'
                #    on_release: app.showcase_boxlayout(box)

                TabbedPanelItem:
                    id: trash
                    text: 'TH'
                #    on_release: app.showcase_boxlayout(box)

        BoxLayout:
            size_hint: (.3, 1)
            orientation: 'vertical'
            padding: 2
            spacing: 5

            Button:
                id: new_note
                text: 'New note'
                height: 32
                size_hint_y: None
                on_release: app.create_note()

            GridLayout:
                id: note_bar
                size_hint: (1, 1)
                cols: 1
                row_default_height: 64

            TextInput:
                id: search
                size_hint_y: None
                multiline: False
                height: 32
                focus: True

        BoxLayout:
            size_hint: (.7, 1)
            orientation: 'vertical'
            padding: 2
            spacing: 5

            TextInput:
                id: title
                size_hint_y: None
                multiline: False
                height: '32dp'
                focus: True
                on_text: app.title_entered()

            BoxLayout:
                size_hint: (1, 1)
                orientation: 'horizontal'
                padding: 0
                spacing: 2

                CodeInput:
                    id: code
                    text: ''

                RstDocument:
                    id: viewer
                    text: code.text
            Button:
                id: send_msg
                text: 'Send'
                size_hint_y: None
                height: '32dp'
                on_release:

<CTextInput@TextInput>
    on_focus:
        screen = self.parent
        if screen.parent: screen.focused = self